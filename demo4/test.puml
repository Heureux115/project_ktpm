@startuml
class com.example.demo4.models.Household {
- int householdId
- Integer headCitizenId
- String address
- String street
- String ward
- String district
- List<Citizen> members
- Integer ownerUserId
- String changeNote
- LocalDate lastChangeDate
+ String toString()
+ int getHouseholdId()
+ void setHouseholdId(int)
+ Integer getHeadCitizenId()
+ void setHeadCitizenId(Integer)
+ String getAddress()
+ void setAddress(String)
+ String getStreet()
+ void setStreet(String)
+ String getWard()
+ void setWard(String)
+ String getDistrict()
+ void setDistrict(String)
+ List<Citizen> getMembers()
+ void setMembers(List<Citizen>)
+ Integer getOwnerUserId()
+ void setOwnerUserId(Integer)
+ String getChangeNote()
+ void setChangeNote(String)
+ LocalDate getLastChangeDate()
+ void setLastChangeDate(LocalDate)
}


class com.example.demo4.models.HouseholdChange {
- int id
- int householdId
- LocalDate changeDate
- String changeContent
+ int getId()
+ void setId(int)
+ int getHouseholdId()
+ void setHouseholdId(int)
+ LocalDate getChangeDate()
+ void setChangeDate(LocalDate)
+ String getChangeContent()
+ void setChangeContent(String)
}


class com.example.demo4.models.TemporaryRecord {
- int id
- int citizenId
- String type
- LocalDate startDate
- LocalDate endDate
- String location
- String note
+ int getId()
+ void setId(int)
+ int getCitizenId()
+ void setCitizenId(int)
+ String getType()
+ void setType(String)
+ LocalDate getStartDate()
+ void setStartDate(LocalDate)
+ LocalDate getEndDate()
+ void setEndDate(LocalDate)
+ String getLocation()
+ void setLocation(String)
+ String getNote()
+ void setNote(String)
}


abstract class com.example.demo4.controllers.BaseController {
# void showInfo(String,String)
# void showWarning(String,String)
# void showError(String,String)
# void handleCancel(javafx.event.ActionEvent)
# void showAlert(String,String,Alert.AlertType)
# boolean requireAdmin()
# boolean confirm(String,String)
# boolean requireLogin()
# boolean showConfirm(String,String)
# boolean showConfirmWithHeader(String,String,String)
}

class com.example.demo4.controllers.AddHomelessCitizenController {
- TextField tfFullName
- DatePicker dpDob
- TextField tfCccd
- TextField tfJob
- Label lblMessage
- HomelessCitizenController parent
+ void setParent(HomelessCitizenController)
- void save()
- void cancel()
- void close()
- String blankToNull(String)
}


class com.example.demo4.dao.UserDao {
- {static} String BASE_SELECT
+ {static} User findByUsernameAndPassword(String,String)
+ {static} List<UserRowData> findAllWithCitizenName()
+ {static} User findByUsername(String)
+ {static} User findById(int)
+ {static} List<User> findAll()
+ {static} int insert(User)
+ {static} void deleteById(int)
+ {static} List<User> findAvailableForAssign()
- {static} User mapRow(ResultSet)
+ {static} void update(User)
}


class com.example.demo4.controllers.AdminController {
- TableView<UserRow> tblUsers
- TableColumn<UserRow,String> colUsername
- TableColumn<UserRow,String> colCitizen
- TableColumn<UserRow,String> colRole
+ void initialize()
- void loadUsers()
+ void onAssignAccount()
+ void onDelete()
+ void onLogout()
+ void backToMenu()
+ void onViewPastEvents()
+ void onApproveEvents()
+ void onManageAssets()
- void openWindow(String,String)
+ void onStatistics()
+ void onTemporaryRecords()
+ void onCitizenHistory()
}


class com.example.demo4.controllers.AdminController$UserRow {
- javafx.beans.property.SimpleIntegerProperty id
- javafx.beans.property.SimpleStringProperty username
- javafx.beans.property.SimpleStringProperty citizenName
- javafx.beans.property.SimpleStringProperty role
+ int getId()
+ javafx.beans.property.StringProperty usernameProperty()
+ javafx.beans.property.StringProperty citizenNameProperty()
+ javafx.beans.property.StringProperty roleProperty()
}


class com.example.demo4.controllers.HouseholdAdminController {
- TableView<Household> table
- TableColumn<Household,String> colId
- TableColumn<Household,String> colOwner
- TableColumn<Household,String> colAddress
- TableColumn<Household,Integer> colMembers
+ void initialize()
- void loadHouseholds()
- void backToMenu()
- void addHousehold()
- void manageMembers()
- void manageHomelessCitizens()
- void manageCitizens()
- void editHousehold()
- void deleteHousehold()
- void viewCitizenHistory()
- void splitHousehold()
- void openTemporaryRecords()
}


class com.example.demo4.controllers.ReturnAssetController {
- TableView<BookingAsset> tblBookingAssets
- TableColumn<BookingAsset,String> colAsset
- TableColumn<BookingAsset,Integer> colQty
- TableColumn<BookingAsset,Integer> colReturned
- Label lblAssetInfo
- TextArea taConditionIn
- TextField tfReturnedQty
- BookingAsset selected
+ void initialize()
- void loadBookingAssets()
- void handleConfirmReturn()
- void handleCancel()
}


class com.example.demo4.dto.UserRowData {
+ int id
+ String username
+ String citizenName
+ String role
}

class com.example.demo4.models.Citizen {
- int id
- String fullName
- String alias
- String gender
- LocalDate dob
- String placeOfBirth
- String hometown
- String ethnicity
- String cccd
- LocalDate cccdIssueDate
- String cccdIssuePlace
- String job
- String workplace
- String previousAddress
- LocalDate registerDate
- String status
- Boolean isHouseholder
- String relation
- Integer householdId
- Integer userId
+ int getId()
+ void setId(int)
+ String getFullName()
+ void setFullName(String)
+ String getAlias()
+ void setAlias(String)
+ String getGender()
+ void setGender(String)
+ LocalDate getDob()
+ void setDob(LocalDate)
+ String getPlaceOfBirth()
+ void setPlaceOfBirth(String)
+ String getHometown()
+ void setHometown(String)
+ String getEthnicity()
+ void setEthnicity(String)
+ String getCccd()
+ void setCccd(String)
+ LocalDate getCccdIssueDate()
+ void setCccdIssueDate(LocalDate)
+ String getCccdIssuePlace()
+ void setCccdIssuePlace(String)
+ String getJob()
+ void setJob(String)
+ String getWorkplace()
+ void setWorkplace(String)
+ String getPreviousAddress()
+ void setPreviousAddress(String)
+ LocalDate getRegisterDate()
+ void setRegisterDate(LocalDate)
+ String getStatus()
+ void setStatus(String)
+ Boolean getHouseholder()
+ void setHouseholder(Boolean)
+ String getRelation()
+ void setRelation(String)
+ Integer getHouseholdId()
+ void setHouseholdId(Integer)
+ Integer getUserId()
+ void setUserId(Integer)
}


class com.example.demo4.controllers.AddCitizenController {
- TextField tfFullName
- TextField tfAlias
- DatePicker dpDob
- TextField tfPlaceOfBirth
- TextField tfHometown
- TextField tfEthnicity
- TextField tfCccd
- DatePicker dpCccdIssueDate
- TextField tfCccdIssuePlace
- TextField tfJob
- TextField tfWorkplace
- TextField tfPreviousAddress
- DatePicker dpRegisterDate
- CheckBox cbHouseholder
- TextField tfRelation
- Label lblMessage
- Stage stage
- Runnable onAddSuccess
- Integer householdId
- Integer userId
+ void setStage(Stage)
+ void setOnAddSuccess(Runnable)
+ void setHouseholdId(Integer)
+ void setUserId(Integer)
+ void initialize()
- void handleAdd()
- void handleCancel()
- void close()
- void setMsg(String)
- String blankToNull(String)
}


class com.example.demo4.controllers.UpdateEventController {
- CustomerController customerController
- DatePicker datePicker
- ComboBox<String> cbStartHour
- TextField txtTitle
- TextArea txtDesc
- ComboBox<String> txtLocation
- int eventId
- String currentStatus
+ void setCustomerController(CustomerController)
+ void setEventData(int,String,LocalDate,String,String,String,String,String)
+ void initialize()
+ void onSave()
+ void onCancel()
}


class com.example.demo4.dao.AssetDao {
+ {static} List<assets> findAll()
+ {static} void insert(assets)
+ {static} void update(assets)
+ {static} void deleteById(int)
- {static} assets mapRow(ResultSet)
+ {static} assets findByIdForUpdate(Connection,int)
+ {static} List<assets> findAllAvailable()
+ {static} void decreaseQuantity(Connection,int,int)
}

class com.example.demo4.dao.CitizenChangeDao {
+ {static} void insert(Connection,CitizenChange)
+ {static} List<CitizenChange> findByCitizen(int)
- {static} CitizenChange mapRow(ResultSet)
- {static} void setDate(PreparedStatement,int,LocalDate)
- {static} void setInt(PreparedStatement,int,Integer)
}

class com.example.demo4.dao.CitizenDao {
+ {static} int insert(Citizen)
+ {static} List<Citizen> findAll()
+ {static} List<Citizen> findAvailableForAssign()
+ {static} List<Citizen> findByHouseholdId(int)
+ {static} List<Citizen> searchByIdPrefix(String)
+ {static} List<Citizen> searchByCccdPrefix(String)
+ {static} Citizen findByCccd(String)
+ {static} List<Citizen> findWithoutHousehold()
+ {static} int countByHousehold(int)
+ {static} void moveCitizenToHousehold(int,int)
+ {static} void moveCitizenToHousehold(Connection,int,int)
+ {static} void update(Connection,Citizen)
+ {static} void update(Citizen)
+ {static} Citizen findById(int)
+ {static} Citizen findByUserId(int)
+ {static} void assignUser(int,int)
+ {static} List<Citizen> findByHousehold(int)
+ {static} void deleteById(int)
- {static} Citizen map(ResultSet)
- {static} void setDate(PreparedStatement,int,LocalDate)
- {static} void setInt(PreparedStatement,int,Integer)
+ {static} void removeCitizenFromHousehold(int)
+ {static} void removeCitizenFromHousehold(int,String)
+ {static} int getNextHouseholdId()
}

class com.example.demo4.EventStatusUtil {
- {static} DateTimeFormatter TIME_FMT
+ {static} void autoUpdatePastEvents()
}


class com.example.demo4.Session {
- {static} Integer currentUserId
- {static} String currentUsername
- {static} String currentRole
+ {static} void login(Integer,String,String)
+ {static} void logout()
+ {static} Integer getCurrentUserId()
+ {static} String getCurrentUsername()
+ {static} String getCurrentRole()
+ {static} boolean isLoggedIn()
+ {static} boolean isAdmin()
+ {static} boolean hasRole(String)
}


class com.example.demo4.models.Event {
- int id
- String title
- String date
- String startTime
- String endTime
- String location
- String description
- String status
+ {static} String STATUS_REGISTERED
+ {static} String STATUS_PAID
+ {static} String STATUS_CONFIRMED
+ {static} String STATUS_CANCELLED
+ int getId()
+ String getTitle()
+ String getDate()
+ String getStartTime()
+ String getEndTime()
+ String getLocation()
+ String getDescription()
+ String getStatus()
+ void setId(int)
+ void setTitle(String)
+ void setDate(String)
+ void setStartTime(String)
+ void setEndTime(String)
+ void setLocation(String)
+ void setDescription(String)
+ void setStatus(String)
}


class com.example.demo4.dao.BookingDao {
+ {static} Booking findByEventId(int)
+ {static} void insert(Booking)
+ {static} Booking findById(int)
}

class com.example.demo4.Main {
- {static} Stage primaryStage
+ {static} Stage getPrimaryStage()
+ void start(Stage)
+ {static} void logout()
+ {static} void showWelcome()
+ {static} void showMenu()
+ {static} void showAdminHousehold()
+ {static} void showCustomerHousehold()
+ {static} void showLogin()
+ {static} void showRegister()
+ {static} void showCustomer()
+ {static} void showAdmin()
+ {static} void showStatistics()
+ {static} void showTemporaryRecords()
+ {static} void main(String[])
}


class com.example.demo4.controllers.EditHouseholdController {
- TextField tfOwnerId
- TextField tfOwnerCccd
- TextField tfAddress
- ContextMenu suggestionMenu
- int selectedIndex
- Stage stage
- Household household
- Runnable onEditSuccess
+ void initialize()
+ void setStage(Stage)
+ void setHousehold(Household)
+ void setOnEditSuccess(Runnable)
- void setupLocking()
- void setupOwnerIdAutoComplete()
- void setupOwnerCccdAutoComplete()
- void buildMenu(List<Citizen>,boolean)
- void setupKeyboardNavigation()
- void highlight()
- void handleSave()
- void handleCancel()
}


class com.example.demo4.controllers.AssignAccountController {
- TableView<Citizen> tblCitizens
- TableColumn<Citizen,String> colName
- TableColumn<Citizen,String> colCCCD
- ComboBox<User> cmbUsers
- Label lblStatus
+ void initialize()
- void refresh()
+ void assignAccount()
}


class com.example.demo4.untils.WindowUtils {
+ {static} Stage openFitScreen(Parent,String)
+ {static} void fitScreen(Stage)
}

class com.example.demo4.controllers.AssetsController {
- TableView<assets> tblAssets
- TableColumn<assets,String> colName
- TableColumn<assets,String> colType
- TableColumn<assets,String> colStatus
- TableColumn<assets,Integer> colQuantity
- TableColumn<assets,Void> colActions
- TextField txtName
- TextField txtType
- TextField txtQuantity
- ComboBox<String> cbStatus
- Label lblMessage
- ObservableList<assets> assetList
+ void initialize()
- void refresh()
- void openReturnAsset()
+ void onAddAsset()
- void addButtonToTable()
- void editAsset(assets)
- void deleteAsset(assets)
- void updateAsset(assets)
- Integer parseInt(String)
- void clearInput()
}


class com.example.demo4.dao.StatisticsDao {
+ {static} int countHouseholds()
+ {static} int countCitizens()
+ {static} Map<String,Integer> citizenByGender()
+ {static} Map<String,Integer> citizenByDetailedAgeGroup()
+ {static} Map<String,Integer> citizenByAgeGroup()
+ {static} Map<String,Integer> citizenChangesByPeriod(LocalDate,LocalDate)
+ {static} Map<String,Integer> temporaryRecordStats()
+ {static} Map<String,Integer> temporaryRecordsByPeriod(LocalDate,LocalDate)
+ {static} Map<String,Integer> citizenByEthnicity()
+ {static} Map<String,Integer> citizenByJob()
}

class com.example.demo4.models.assets {
- IntegerProperty id
- StringProperty name
- StringProperty type
- IntegerProperty quantity
- StringProperty status
+ String toString()
+ int getId()
+ void setId(int)
+ IntegerProperty idProperty()
+ String getName()
+ void setName(String)
+ StringProperty nameProperty()
+ String getType()
+ void setType(String)
+ StringProperty typeProperty()
+ int getQuantity()
+ void setQuantity(int)
+ IntegerProperty quantityProperty()
+ String getStatus()
+ void setStatus(String)
+ StringProperty statusProperty()
}


class com.example.demo4.dao.HouseholdDao {
+ {static} List<Household> findAll()
+ {static} Household findById(int)
+ {static} List<Household> findByOwner(int)
+ {static} List<Household> findByUser(int)
+ {static} void insert(Connection,Household)
+ {static} void update(Connection,Household)
+ {static} void insert(Household)
+ {static} void update(Household)
+ {static} void delete(int)
+ {static} void deleteById(int)
- {static} Household mapRow(ResultSet)
+ {static} int getNextHouseholdId()
}

class com.example.demo4.controllers.SplitHouseholdController {
- Label lblOriginalHousehold
- TableView<Citizen> tableAllMembers
- TableView<Citizen> tableNewMembers
- TableColumn<Citizen,String> colNameAll
- TableColumn<Citizen,String> colRelationAll
- TableColumn<Citizen,String> colCccdAll
- TableColumn<Citizen,String> colNameNew
- TableColumn<Citizen,String> colRelationNew
- TableColumn<Citizen,String> colCccdNew
- TextField tfNewAddress
- TextArea taNote
- Stage stage
- Household originalHousehold
- Runnable onSplitSuccess
- ObservableList<Citizen> allMembers
- ObservableList<Citizen> newHouseholdMembers
+ void setStage(Stage)
+ void setOriginalHousehold(Household)
+ void setOnSplitSuccess(Runnable)
+ void initialize()
- void loadMembers()
- void moveToNewHousehold()
- void moveBackToOriginal()
- void handleSplit()
- void handleCancel()
- void close()
}


class com.example.demo4.models.BookingAsset {
- int id
- int bookingId
- int assetId
- int quantity
- int returnedQty
- String conditionOut
- String conditionIn
- String status
+ int getId()
+ void setId(int)
+ int getBookingId()
+ void setBookingId(int)
+ int getAssetId()
+ void setAssetId(int)
+ int getQuantity()
+ void setQuantity(int)
+ String getConditionIn()
+ void setConditionIn(String)
+ String getConditionOut()
+ void setConditionOut(String)
+ String getStatus()
+ void setStatus(String)
+ int getReturnedQty()
+ void setReturnedQty(int)
}


class com.example.demo4.controllers.HouseholdCustomerController {
- TableView<Citizen> table
- TableColumn<Citizen,String> colName
- TableColumn<Citizen,String> colCccd
- TableColumn<Citizen,String> colDob
- TableColumn<Citizen,String> colRelation
- TableColumn<Citizen,String> colJob
+ void initialize()
- void loadMyCitizens()
- void backToMenu()
}


class com.example.demo4.controllers.CustomerController {
- TableView<EventRow> eventTable
- TableColumn<EventRow,String> colTitle
- TableColumn<EventRow,String> colDate
- TableColumn<EventRow,String> colStart
- TableColumn<EventRow,String> colEnd
- TableColumn<EventRow,String> colLocation
- TableColumn<EventRow,String> colStatus
- TextField titleFilterField
- TextField locationFilterField
- DatePicker dateFilterPicker
- ObservableList<EventRow> masterList
- FilteredList<EventRow> filteredList
+ void initialize()
+ void loadEvents()
- String trimTime(String)
- void onResetTable()
- void addColumnFilter(TableColumn<EventRow,?>,String)
- void applyFilter()
- void backToMenu()
- void onLogout()
- void openAssetRental()
- void onAddEvent()
- void onOpenUpdate()
}


class com.example.demo4.controllers.CustomerController$EventRow {
- SimpleIntegerProperty id
- SimpleStringProperty title
- SimpleStringProperty date
- SimpleStringProperty start
- SimpleStringProperty end
- SimpleStringProperty location
- SimpleStringProperty description
- SimpleStringProperty status
+ int getId()
+ SimpleStringProperty titleProperty()
+ SimpleStringProperty dateProperty()
+ SimpleStringProperty startProperty()
+ SimpleStringProperty endProperty()
+ SimpleStringProperty locationProperty()
+ SimpleStringProperty descriptionProperty()
+ SimpleStringProperty statusProperty()
}


class com.example.demo4.controllers.EventApprovalController {
- TableView<EventRow> tblEvents
- TableColumn<EventRow,String> colTitle
- TableColumn<EventRow,String> colDate
- TableColumn<EventRow,String> colLocation
- TableColumn<EventRow,String> colStatus
- Label lblMessage
+ void initialize()
- void loadEvents()
- void onMarkPaid()
- void onMarkConfirmed()
- void onMarkCancelled()
- void changeStatus(String)
}


class com.example.demo4.controllers.EventApprovalController$EventRow {
- SimpleIntegerProperty id
- SimpleStringProperty title
- SimpleStringProperty date
- SimpleStringProperty location
- SimpleStringProperty status
+ int getId()
+ SimpleStringProperty titleProperty()
+ SimpleStringProperty dateProperty()
+ SimpleStringProperty locationProperty()
+ SimpleStringProperty statusProperty()
}


class com.example.demo4.controllers.LoginController {
- TextField txtUsername
- PasswordField txtPassword
- Button btnLogin
- Button btnRegister
- Label lblMessage
- void initialize()
+ void onLogin(javafx.event.ActionEvent)
+ void onShowRegister(javafx.event.ActionEvent)
}


class com.example.demo4.controllers.AccountProfileController {
- TextField txtUsername
- PasswordField txtPassword
- TextField txtCccd
- Label lblCitizenFullname
- Label lblCitizenCccd
- Label lblMessage
- User currentUser
- Citizen currentCitizen
+ void initialize()
- void updateAccount()
}


class com.example.demo4.models.Booking {
- int id
- int userId
- int eventId
- String status
- String paymentStatus
+ int getId()
+ void setId(int)
+ int getUserId()
+ void setUserId(int)
+ String getStatus()
+ void setStatus(String)
+ int getEventId()
+ void setEventId(int)
+ String getPaymentStatus()
+ void setPaymentStatus(String)
}


class com.example.demo4.controllers.EditCitizenController {
- TextField tfFullName
- TextField tfAlias
- DatePicker dpDob
- TextField tfPlaceOfBirth
- TextField tfHometown
- TextField tfEthnicity
- TextField tfCccd
- DatePicker dpCccdIssueDate
- TextField tfCccdIssuePlace
- TextField tfJob
- TextField tfWorkplace
- ChoiceBox<String> cbStatus
- TextField tfPreviousAddress
- DatePicker dpRegisterDate
- CheckBox cbHouseholder
- TextField tfRelation
- Label lblMessage
- Stage stage
- Citizen citizen
- Runnable onEditSuccess
+ void setStage(Stage)
+ void setOnEditSuccess(Runnable)
+ void setCitizen(Citizen)
+ void initialize()
- void handleSave()
- void handleCancel()
- void close()
- void setMsg(String)
- String blankToNull(String)
- String nvl(String)
}


class com.example.demo4.controllers.RegisterController {
- TextField txtUsername
- PasswordField txtPassword
- PasswordField txtPassword2
- TextField txtFullname
- TextField txtEmail
- ChoiceBox<String> roleBox
- Label lblMessage
+ void initialize()
+ void onRegister(ActionEvent)
+ void onBack(ActionEvent)
}


class com.example.demo4.controllers.PastEventsController {
- {static} boolean updated
- TableView<EventRow> tblPastEvents
- TableColumn<EventRow,String> colTitle
- TableColumn<EventRow,String> colDate
- TableColumn<EventRow,String> colLocation
- TableColumn<EventRow,String> colStatus
- Label lblMessage
+ void initialize()
- void loadPastEvents()
}


class com.example.demo4.controllers.PastEventsController$EventRow {
- SimpleIntegerProperty id
- SimpleStringProperty title
- SimpleStringProperty date
- SimpleStringProperty location
- SimpleStringProperty status
+ int getId()
+ SimpleStringProperty titleProperty()
+ SimpleStringProperty dateProperty()
+ SimpleStringProperty locationProperty()
+ SimpleStringProperty statusProperty()
}


class com.example.demo4.controllers.MenuController {
- Label lblUsername
- VBox cardAdmin
- VBox cardCustomer
- VBox cardAdmin1
- VBox cardCustomer1
+ void goToManagement()
+ void goToCitizenManagement()
+ void logout()
+ void initialize()
- void showAdminMode()
- void showCustomerMode()
- void openAccountProfile()
+ void goToStatistics()
+ void goToTemporaryRecords()
}


abstract class com.example.demo4.dao.BaseDao {
# {static} Connection getConn()
# {static} void setIntOrNull(PreparedStatement,int,Integer)
# {static} void setDateOrNull(PreparedStatement,int,String)
# {static} void setStringOrNull(PreparedStatement,int,String)
}

class com.example.demo4.controllers.CitizenController {
- TableView<Citizen> citizenTable
- TableColumn<Citizen,Integer> colId
- TableColumn<Citizen,String> colFullName
- TableColumn<Citizen,String> colAlias
- TableColumn<Citizen,String> colDob
- TableColumn<Citizen,String> colPlaceOfBirth
- TableColumn<Citizen,String> colHometown
- TableColumn<Citizen,String> colEthnicity
- TableColumn<Citizen,String> colCccd
- TableColumn<Citizen,String> colCccdIssueDate
- TableColumn<Citizen,String> colCccdIssuePlace
- TableColumn<Citizen,String> colJob
- TableColumn<Citizen,String> colWorkplace
- TableColumn<Citizen,String> colPreviousAddress
- TableColumn<Citizen,String> colRegisterDate
- TableColumn<Citizen,Boolean> colHouseholder
- TableColumn<Citizen,String> colRelation
- TableColumn<Citizen,Integer> colHouseholdId
- TableColumn<Citizen,Integer> colUserId
- TextField searchField
- Integer currentHouseholdId
- ObservableList<Citizen> citizenList
+ void setCurrentHouseholdId(int)
+ void initialize()
- void addCitizen()
- void editCitizen()
- void deleteCitizen()
- void searchCitizen()
- void refreshList()
- void backToMenu()
- void loadFromDB()
}


class com.example.demo4.controllers.ManageHouseholdMembersController {
- TableView<Citizen> tableMembers
- TableView<Citizen> tableNoHouse
- TableColumn<Citizen,String> colName1
- TableColumn<Citizen,String> colRelation1
- TableColumn<Citizen,String> colName2
- TableColumn<Citizen,String> colRelation2
- TextField tfTargetHousehold
- int householdId
- Stage stage
- ObservableList<Citizen> members
- ObservableList<Citizen> noHouse
+ void setHouseholdId(int)
+ void setStage(Stage)
+ void initialize()
- void loadData()
- void removeMember()
- void addMember()
- void moveToOtherHousehold()
- void close()
}


class com.example.demo4.dao.TemporaryRecordDao {
+ {static} int insert(TemporaryRecord)
+ {static} List<TemporaryRecord> findByCitizen(int)
- {static} TemporaryRecord mapRow(ResultSet)
- {static} void setDate(PreparedStatement,int,LocalDate)
+ {static} void deleteById(int)
+ {static} List<TemporaryRecord> findAll()
}

class com.example.demo4.controllers.AddHouseholdController {
- ComboBox<Citizen> cbHeadCitizen
- TextField tfAddress
- Stage stage
- Runnable onAddSuccess
+ void setStage(Stage)
+ void setOnAddSuccess(Runnable)
+ void initialize()
- void handleAdd()
- void handleCancel()
- Integer parseInteger(String)
- void closeStage()
}


class com.example.demo4.dao.BookingAssetDao {
+ {static} void rentAsset(int,int,int,String)
+ {static} List<BookingAsset> findUnreturnedByBooking(int)
+ {static} void confirmReturnPartial(int,int,String)
+ {static} List<BookingAsset> findAllUnreturned()
}

class com.example.demo4.Database {
- {static} String URL
- {static} String USER
- {static} String PASSWORD
+ {static} Connection getConnection()
}


class com.example.demo4.models.CitizenChange {
- int id
- int citizenId
- Integer fromHouseholdId
- Integer toHouseholdId
- String changeType
- LocalDate changeDate
- String destination
- String note
+ int getId()
+ void setId(int)
+ int getCitizenId()
+ void setCitizenId(int)
+ Integer getFromHouseholdId()
+ void setFromHouseholdId(Integer)
+ Integer getToHouseholdId()
+ void setToHouseholdId(Integer)
+ String getChangeType()
+ void setChangeType(String)
+ LocalDate getChangeDate()
+ void setChangeDate(LocalDate)
+ String getDestination()
+ void setDestination(String)
+ String getNote()
+ void setNote(String)
}


class com.example.demo4.controllers.AddTemporaryRecordController {
- ComboBox<Citizen> cbCitizen
- RadioButton rbTamVang
- RadioButton rbTamTru
- DatePicker dpStartDate
- DatePicker dpEndDate
- CheckBox cbNoExpiry
- TextField tfLocation
- TextArea taNote
- Stage stage
- Runnable onAddSuccess
+ void initialize()
+ void setStage(Stage)
+ void setOnAddSuccess(Runnable)
- void handleSave()
- void handleCancel()
- void close()
}


class com.example.demo4.controllers.WelcomeController {
- ImageView box
- Text successText
- Pane rootPane
- Button btnSkip
- ProgressIndicator loadingSpinner
- SequentialTransition intro
- Timeline loadingTimeline
- void centerHorizontally(Node)
- void centerTextToBox(Text,ImageView)
+ void initialize()
- void playIntro()
- void startLoadingDots()
- void stopLoadingDots()
- SequentialTransition buildIntroAnimation()
- void onSkip()
- void goToMenu()
}


class com.example.demo4.controllers.RentAssetController {
- ComboBox<assets> cbAsset
- TextField tfQuantity
- TextArea taConditionOut
- int bookingId
+ void setBookingId(int)
+ void initialize()
- void handleRent()
- void closeStage()
}


class com.example.demo4.controllers.AddEventController {
- TextField txtTitle
- TextArea txtDesc
- DatePicker datePicker
- ComboBox<String> cbStartHour
- ComboBox<String> txtLocation
- Label lblMessage
- Stage stage
- CustomerController customerController
+ void setStage(Stage)
+ void setCustomerController(CustomerController)
+ void initialize()
+ void onSave()
- boolean validateInput()
- void closeStage()
+ void onCancel()
}


class com.example.demo4.models.User {
- int id
- String username
- String password
- String role
- String fullname
- String email
+ int getId()
+ void setId(int)
+ String getEmail()
+ void setEmail(String)
+ String getFullname()
+ void setFullname(String)
+ String getRole()
+ void setRole(String)
+ String getPassword()
+ void setPassword(String)
+ String getUsername()
+ void setUsername(String)
}


class com.example.demo4.dao.HouseholdChangeDao {
+ {static} void insert(Connection,int,String,String)
+ {static} void insert(int,String,String)
}

class com.example.demo4.dao.EventDao {
+ {static} List<Event> findUpcomingFrom(LocalDate)
+ {static} List<Event> findPastBefore(LocalDate)
+ {static} List<Event> findAll()
+ {static} boolean hasTimeConflict(LocalDate,String,String)
+ {static} void insert(Event)
+ {static} int insertWithCheck(Event)
+ {static} Event findById(int)
+ {static} void update(Event)
+ {static} void updateStatus(int,String)
- {static} Event mapRow(ResultSet)
}

class com.example.demo4.controllers.StatisticsController {
- Label lblTotalCitizens
- Label lblMale
- Label lblFemale
- BarChart<String,Number> chartAge
- CategoryAxis xAxisAge
- NumberAxis yAxisAge
- PieChart chartGender
+ void initialize()
- void loadStatistics()
- void backToMenu()
}


class com.example.demo4.controllers.CitizenHistoryController {
- Label lblCitizenInfo
- TableView<CitizenChange> table
- TableColumn<CitizenChange,Integer> colId
- TableColumn<CitizenChange,String> colChangeType
- TableColumn<CitizenChange,String> colChangeDate
- TableColumn<CitizenChange,String> colFromHousehold
- TableColumn<CitizenChange,String> colToHousehold
- TableColumn<CitizenChange,String> colNote
- Citizen citizen
- ObservableList<CitizenChange> changes
+ void initialize()
+ void setCitizen(Citizen)
- void loadHistory()
- void viewDetails()
- void refresh()
- void close()
}


class com.example.demo4.controllers.TemporaryRecordController {
- TableView<TemporaryRecord> table
- TableColumn<TemporaryRecord,Integer> colId
- TableColumn<TemporaryRecord,String> colCitizenName
- TableColumn<TemporaryRecord,String> colType
- TableColumn<TemporaryRecord,String> colStartDate
- TableColumn<TemporaryRecord,String> colEndDate
- TableColumn<TemporaryRecord,String> colLocation
- TableColumn<TemporaryRecord,String> colStatus
- ComboBox<String> cbFilterType
- ComboBox<String> cbFilterStatus
- TextField tfSearchCitizen
- ObservableList<TemporaryRecord> records
+ void initialize()
- void loadRecords()
- void applyFilter()
- void resetFilter()
- void addRecord()
- void viewDetails()
- void deleteRecord()
- void refresh()
- void close()
}


class com.example.demo4.controllers.HomelessCitizenController {
- TableView<Citizen> table
- TableColumn<Citizen,Integer> colId
- TableColumn<Citizen,String> colName
- TableColumn<Citizen,String> colRelation
- TableColumn<Citizen,String> colDob
- TableColumn<Citizen,String> colCCCD
- ComboBox<Household> cbHousehold
- ObservableList<Citizen> data
+ void initialize()
- void loadCitizens()
- void loadHouseholds()
- void assignToHousehold()
- void openAddCitizen()
- void close()
+ void reload()
}




com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AddHomelessCitizenController
com.example.demo4.dao.BaseDao <|-- com.example.demo4.dao.UserDao
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AdminController
com.example.demo4.controllers.AdminController +.. com.example.demo4.controllers.AdminController$UserRow
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.HouseholdAdminController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.ReturnAssetController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AddCitizenController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.UpdateEventController
javafx.application.Application <|-- com.example.demo4.Main
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.EditHouseholdController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AssetsController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.SplitHouseholdController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.HouseholdCustomerController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.CustomerController
com.example.demo4.controllers.CustomerController +.. com.example.demo4.controllers.CustomerController$EventRow
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.EventApprovalController
com.example.demo4.controllers.EventApprovalController +.. com.example.demo4.controllers.EventApprovalController$EventRow
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AccountProfileController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.EditCitizenController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.RegisterController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.PastEventsController
com.example.demo4.controllers.PastEventsController +.. com.example.demo4.controllers.PastEventsController$EventRow
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.MenuController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.CitizenController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.ManageHouseholdMembersController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AddHouseholdController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AddTemporaryRecordController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.RentAssetController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.AddEventController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.StatisticsController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.CitizenHistoryController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.TemporaryRecordController
com.example.demo4.controllers.BaseController <|-- com.example.demo4.controllers.HomelessCitizenController
@enduml